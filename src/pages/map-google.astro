---
import DefaultLayout from '@layouts/DefaultLayout.astro';
import { Leaflet, Marker, Popup } from "astro-leaflet";
import { getCollection } from "astro:content";

const sites = await getCollection("sites");

---

<DefaultLayout title="Map View">
    <div class="container mb-32">
        <h1 class="mb-10">Map View</h1>
        <p class="text-2xl mb-15">Use the interactive map below to find mutual aid near you.</p>
<Leaflet
  id="map-quick-start"
  style=""
  options={{ center: [39.9925, -75.2411], zoom: 11, tileByName: 'Google&type=hybrid' }}
>
    {
      sites.map((site) => (
        <Marker latlng={[site.data.Latitude, site.data.Longitude]} options={{alt: site.data.Name}}>
          <Popup content=`<h4 class="text-lg/5">${site.data.Name}</h4><p class="mt-3!">${site.data.Description}<br>${site.data['Days and Times']}<br>${site.data.Address}</p>` />
        </Marker>
      ))
    }
</Leaflet>
    </div>
</DefaultLayout>